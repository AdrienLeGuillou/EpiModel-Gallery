---
output:
  html_document:
    df_print: paged
---

```{r, echo = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "README-"
)
```
---
# Modeling Information Diffusion Process in a Social Network Using SI Model

### Description
In this example we build an information diffusion model based on exsiting SI process in EpiModel to monitor dissemination of new ideas inside a social network. Instead of information diffusion (infection process) happening between any discordant nodes, we monitor two scenarios in which:  

(1) The transmission needs a threshold of degree of discordant edgelist: it can only happen when suscpetible individuals have more than minimum degree of partnerships with infectious individuals;  

(2) The probability of transmission is a function of degree of discordant partnerships.  
New argument includes minimum degree of discordant edgelist, log odds ratio of transmission with 1 degree increase of discordant partnership, baseline log odds when susceptible individuals have 0 discordant partners. No entirely new modules are needed, but infection process module is edited: 

### Modules

**Scenario 1:**   
The **infection module** (function = `infect_mod`) includes the following changes from the base EpiModel infection module (`infection.net`):

* Book-keeping the degree of discordant edges for susceptible nodes

* The infection probability is only assigned to susceptible nodes with more than minimum degree of discordant edges, otherwise is 0   

**Scenario 2:**  
The **infection module** (function = `infect_newmod`) includes the following changes from the base EpiModel infection module (`infection.net`):

* Book-keeping the degree of discordant edges for susceptible nodes

* The infection probability is a logistic function of degree of discordant edges for susceptible nodes with user specified paramters

 
### Parameters

The new or altered epidemic model parameters are:

**Scenario 1**:        

* `min.degree`: the minimum degree of discordant relationship for the infection to occur 

**Scenario 2**:

* `beta0`: baseline log odds of transmission when susceptible individuals have 0 degree of discordant partnership, usually negative as transmission probability is usually 0 when one has 0 degree of discordant partnership (suggest <-3).  

* `beta1`: the increase of log odds with 1 degree increase of discordant partnership, usually set as positive as increase of degree can increase transmission probability.

```{r, echo=FALSE}
beta0_1=-2
beta1_1=0.1
degree<-1:20
par(mfrow=c(2,2))
p_transmission_1<-plogis(beta1_1*degree+beta0_1)
plot(degree,p_transmission_1,main="beta0=-2, beta1=0.1",ylim=c(0,1.1),cex.main=0.8)
beta0_2=-2
beta1_2=0.7
p_transmission_2<-plogis(beta1_2*degree+beta0_2)
plot(degree,p_transmission_2,main="beta0=-2, beta1=0.7", ylim=c(0,1.1),cex.main=0.8)
beta0_3=-5
beta1_3=0.1
p_transmission_3<-plogis(beta1_3*degree+beta0_3)
plot(degree,p_transmission_3, ylim=c(0,1.1),main="beta0=-5, beta1=0.1",cex.main=0.8)
beta0_4=-5
beta1_4=0.7
p_transmission_4<-plogis(beta1_4*degree+beta0_4)
plot(degree,p_transmission_4, ylim=c(0,1.1),main="beta0=-5, beta1=0.7",cex.main=0.8)
mtext("Examples of beta0 and beta1 with Transmission Probability", outer=TRUE,  cex=1.1, line=-1)
```

### Worked example

In the work example 1 in `model.R`, we consider a situation in which people are densely connected and susceptible individuals only accept new ideas if they have more than 3 partnerships with infected individuals (min.degree=3). Similar to other SI model, the infection process is slow initially and increases as more people become infected. However, the si.flow is lower than normal SI model and not as smooth as infectious probability jumps at minimum degree.

In the work example 2 in `model.R`, we consider a situation in which baseline transmission probability is almost 0 when susceptible individuals have 0 discordant partnership (log odds beta0=-7), and transmission probability increases relatively fast with the increase of the degree (log odds ratio beta1=0.5). The process is similar to infection process in normal SI model, incidence increases initially as more people are infected then decreases as the susceptible population decreases.

## Author

Samuel Jenness, Emory University  

Yuan Zhao, Emory University   

